<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8"/>
    <title>Submit Recipe - EatAndShare</title>
    <link rel="stylesheet" th:href="@{/css/uploadPage.css}"/>
</head>
<body>


<!-- ===== HEADER: Navigation bar and login state display ===== -->
<header>
    <h2 class="logo">EatAndShare</h2>
    <nav class="navigation">
        <a th:href="@{/}">Home</a>
        <a th:href="@{/about}">About</a>
        <a th:href="@{/contact}">Contact</a>
        <a th:href="@{/services}">Share</a>

        <!-- If user is logged in, show profile icon and dropdown -->
        <div class="icon-login" th:if="${loggedIn}">
            <ion-icon name="person-circle-outline"></ion-icon>
            <ul class="dropdown">
                <li><a href="/profile">My Profile</a></li>
                <li><a href="/password">Password</a></li>
                <li><a th:href="@{/logout}">Logout</a></li>
            </ul>
        </div>


        <!-- If user is not logged in, show login button -->
        <button class="btnLogin-popup" th:if="${!loggedIn}">Login</button>
    </nav>
</header>

<div class="main-content">


    <!-- ‚úÖ Recipe Submission Form -->
    <form th:action="@{/recipes/add}" method="post" enctype="multipart/form-data">

        <h2>
            Welcome
            <span th:text="${firstName}">User</span>
            <span th:text="${lastName}"></span>, Share Your Recipe üçΩÔ∏è
        </h2>

        <!-- Recipe Title -->
        <div class="form-group">
            <label for="title">Recipe Title *</label>
            <input type="text" id="title" name="title" placeholder="Enter recipe name" required/>
        </div>

        <!-- Preparation Time -->
        <div class="form-group">
            <label for="prepTime">Preparation Time (mins) *</label>

            <input type="number" id="prepTime" name="prepTime" min="1" max="600" required />

        </div>

        <!-- Cooking Time -->
        <div class="form-group">
            <label for="cookTime">Cooking Time (mins) *</label>
            <input type="number" id="cookTime" name="cookTime" min="1" max="600" required />

        </div>

        <!-- Difficulty -->
        <div class="form-group">
            <label for="difficulty">Difficulty *</label>
            <select id="difficulty" name="difficulty" required>
                <option value="">--Choose--</option>
                <option value="Easy">Easy</option>
                <option value="Medium">Medium</option>
                <option value="Hard">Hard</option>
            </select>
        </div>

        <!-- Category -->
        <div class="form-group">
            <label for="categoryName">Category *</label>
            <select id="categoryName" name="categoryName" required>
                <option value="">-- Choose Category --</option>
                <option value="Breakfast">Breakfast</option>
                <option value="Lunch">Lunch</option>
                <option value="Dinner">Dinner</option>
                <option value="Salad">Salad</option>
                <option value="Dessert">Dessert</option>
            </select>
        </div>

        <!-- Ingredients Section -->
        <div class="form-group ingredients-container" id="ingredientsList">
            <label>Ingredients *</label>
            <div class="ingredient-item">
                <input type="text" name="ingredientNames" placeholder="Ingredient (e.g. Sugar)" required/>
                <input type="text" name="quantities" placeholder="Quantity (e.g. 2)" required/>
                <input type="text" name="units" placeholder="Unit (e.g. cups)" required/>
            </div>
        </div>
        <button type="button" class="add-btn" onclick="addIngredient()">+ Add Ingredient</button>

        <!-- Instructions -->
        <div class="form-group">
            <label for="instructions">Instructions *</label>
            <textarea id="instructions" name="instructions" rows="5"
                      placeholder="Step-by-step instructions..." required></textarea>
        </div>

        <!-- Upload Image -->
        <div class="form-group">
            <label for="image">Upload Image</label>
            <input type="file" id="image" name="image" accept="image/png,image/jpeg" required />

        </div>

        <!-- ‚úÖ Flash messages from controller -->
        <div th:if="${successMessage}" class="success-msg" th:text="${successMessage}"></div>
        <div th:if="${errorMessage}" class="error-msg" th:text="${errorMessage}"></div>

        <!-- Submit -->
        <button type="submit" class="submit-btn">Submit Recipe</button>
    </form>
</div>

<footer class="footer">
    <h2>EatAndShare</h2>
    <p>Cook ‚Ä¢ Share ‚Ä¢ Enjoy</p>

    <small>&copy; 2025 EatAndShare ‚Äî All Rights Reserved</small>
</footer>

<!-- Ionicons -->
<script src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js" type="module"></script>
<script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>

<!-- JS -->
<script th:src="@{/js/recipescript.js}"></script>

</body>
</html>
